# Data Quality Module Configuration
# Requirements: 1.2, 1.3, 2.2, 13.1
data-quality:
  enabled: true
  
  # Storage configuration (Requirement 2.2)
  # Supports both S3 and local filesystem storage
  storage:
    type: s3  # Options: 's3' for AWS S3, 'local' for filesystem (default: s3)
    
    # S3 storage configuration
    s3:
      bucket: regtech-data-quality
      region: us-east-1
      prefix: quality/
      access-key: ${AWS_ACCESS_KEY_ID:}
      secret-key: ${AWS_SECRET_ACCESS_KEY:}
      endpoint: ${AWS_S3_ENDPOINT:}  # For LocalStack testing
      encryption: AES256
    
    # Local filesystem storage configuration
    local:
      base-path: ./data/quality
      create-directories: true
  
  # Async thread pool configuration (Requirement 13.1)
  # Purpose: Handles async quality validation operations
  async:
    enabled: true
    core-pool-size: 5
    max-pool-size: 10
    queue-capacity: 100
    thread-name-prefix: data-quality-async-
    await-termination-seconds: 60
  
  # Rules engine configuration
  rules-engine:
    enabled: true  # Enable database-driven rules engine
    cache-enabled: true
    cache-ttl: 300  # 5 minutes in seconds
    parallel-execution: false  # Execute rules sequentially for now
    
    # Logging configuration (Requirements 6.1-6.5)
    logging:
      log-executions: true  # Log each rule execution
      log-violations: true  # Log all violations with details
      log-summary: true  # Log summary statistics after validation
      
    # Performance thresholds (Requirement 6.5)
    performance:
      warn-threshold-ms: 100  # Warn if single rule execution exceeds this
      max-execution-time-ms: 5000  # Warn if total validation exceeds this
  
  # Rules migration configuration
  rules-migration:
    enabled: true  # Run once to populate initial rules, then disable

---
# Development profile overrides
spring:
  config:
    activate:
      on-profile: development

data-quality:
  # Use local filesystem storage in development
  storage:
    type: local
  
  # Reduced thread pool for development
  async:
    core-pool-size: 2
    max-pool-size: 4

---
# Production profile overrides
spring:
  config:
    activate:
      on-profile: production

data-quality:
  # Use S3 storage in production
  storage:
    type: s3
  
  # Increased thread pool for production
  async:
    core-pool-size: 10
    max-pool-size: 20
