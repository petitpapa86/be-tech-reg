# Ingestion module specific configuration
ingestion:
  s3:
    bucket: regtech-data-storage
    prefix: raw/
    multipart-threshold: 104857600 # 100MB
    max-retry-attempts: 3
  
  file:
    max-size: 524288000 # 500MB
    supported-types:
      - application/json
      - application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
  
  bank-registry:
    cache-ttl: 86400 # 24 hours in seconds
    retry-attempts: 3
    timeout: 30000 # 30 seconds
  
  processing:
    batch-id-format: "batch_%s_%s" # batch_YYYYMMDD_HHMMSS_UUID
    streaming-threshold: 100000 # Use streaming for files with > 100k exposures

# Outbox processing configuration
regtech:
  ingestion:
    outbox:
      processing:
        enabled: true
      max-retries: 3
  
  # S3 configuration
  s3:
    bucket: regtech-data-storage
    retry:
      max-attempts: 3
      base-delay-ms: 1000
    lifecycle:
      glacier-transition-days: 180
  
  # Compliance and retention configuration
  compliance:
    retention:
      default-policy: FINANCIAL_DATA_DEFAULT
      reporting:
        enabled: true
        schedule: "0 0 3 * * SUN" # Weekly on Sunday at 3 AM
      lifecycle-update:
        enabled: true
        schedule: "0 0 2 * * *" # Daily at 2 AM
    cleanup:
      enabled: true
      dry-run: true # Set to false to enable actual deletion
      batch-size: 100 # Number of files to process in each batch
      schedule: "0 0 4 1 * *" # Monthly on 1st day at 4 AM